# 第9天：节拍器与音符发声

## 依赖库备注
- `flutter_midi_pro`: 用于实现音符声音和节拍器声音的MIDI播放功能，支持SoundFont文件加载
- `TimGM6mb.sf2`: SoundFont文件，用于提供各种乐器的音符声音和节拍声音
- `flutter_riverpod`: 用于管理节拍器和声音播放的状态
- `riverpod_annotation`: 用于riverpod的注解支持（可选）

## 工作事项

1. 集成flutter_midi_pro库：
   - 在pubspec.yaml中添加flutter_midi_pro依赖
   - 配置项目权限，确保音频播放功能正常工作
   - 状态：待实现

2. 准备TimGM6mb.sf2 SoundFont文件：
   - 下载TimGM6mb.sf2文件并添加到项目资源目录
   - 配置pubspec.yaml，将SoundFont文件添加到资源中
   - 状态：待实现

3. 初始化MIDI播放器：
   - 实现MIDI播放器的初始化逻辑
   - 加载TimGM6mb.sf2 SoundFont文件
   - 测试基本的音符播放功能
   - 状态：待实现

4. 设计节拍器功能：
   - 实现节拍器UI界面，包括速度调节滑块（60-200 BPM）
   - 支持节拍类型选择（4/4, 3/4, 2/4等）
   - 实现启动/暂停/重置按钮
   - 支持节拍音量调节
   - 状态：待实现

5. 实现节拍器核心逻辑：
   - 根据设定的速度和节拍类型生成节拍序列
   - 使用MIDI播放器播放节拍声音，通过不同的MIDI音符值区分强拍和弱拍
   - 实现节拍的精准计时
   - 状态：待实现

6. 实现音符发声功能：
   - 建立音符名称与MIDI音符值的映射关系
   - 实现根据音符名称播放对应声音的功能
   - 支持音符音量调节
   - 测试所有音符的发声效果
   - 状态：待实现

7. 集成到练习模式：
   - 将节拍器功能集成到练习模式页面
   - 实现练习音符与对应声音的同步播放
   - 确保节拍器与练习进度的协调工作
   - 状态：待实现

8. 优化与测试：
   - 优化音频播放的性能和稳定性
   - 测试不同设备上的兼容性
   - 调整UI界面，确保良好的用户体验
   - 状态：待实现