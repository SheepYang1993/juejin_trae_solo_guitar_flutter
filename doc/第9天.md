# 第9天：练习页面支持音符发声

## 功能概述
在练习页面中，当系统显示待练习音符（即`PracticeState.showingNote`状态）时，自动播放该音符的声音，帮助用户通过听觉记忆加深对音符的认识。

## 依赖库备注
- `flutter_midi_pro`: 用于实现音符声音的MIDI播放功能，支持SoundFont2文件加载
- `TimGM6mb.sf2`: SoundFont2文件，用于提供各种乐器的音符声音，需放置在项目资源目录中

## 实现原理
1. **状态监听**：当练习页面状态切换到`PracticeState.showingNote`时，触发音符播放逻辑
2. **MIDI初始化**：应用启动时初始化MIDI引擎并加载SoundFont文件
3. **音符映射**：将吉他音符转换为对应的MIDI音高
4. **声音播放**：调用MIDI引擎播放对应音符的声音

## 工作事项
1. **添加依赖库**：在`pubspec.yaml`中添加`flutter_midi_pro`依赖
2. **配置SoundFont文件**：将`TimGM6mb.sf2`文件添加到项目资源目录并配置pubspec
3. **初始化MIDI引擎**：
   - 在应用入口或练习页面初始化时加载SoundFont文件
   - 配置MIDI通道和乐器音色（吉他音色）
4. **实现音符播放逻辑**：
   - 在`practice_mode_page.dart`中监听`_currentState`变化
   - 当状态变为`showingNote`时，获取当前音符`_currentNote`
   - 将音符转换为MIDI音高并调用MIDI引擎播放
5. **测试验证**：
   - 运行应用进入练习模式
   - 验证每个显示的音符都能正确发声
   - 测试不同音符的声音准确性

## 关键代码位置
- 练习页面状态管理：`lib/pages/practice_mode_page.dart`
- 状态枚举定义：`PracticeState`枚举中的`showingNote`状态
- 音符播放触发点：当`_currentState`设置为`PracticeState.showingNote`时

## 注意事项
- 确保SoundFont文件正确加载，否则可能导致无声音输出
- 调整合适的音量，避免声音过大或过小
- 考虑添加音符播放的错误处理机制
- 测试不同设备上的兼容性
